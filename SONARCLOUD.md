# SonarCloud Integration

This project is integrated with SonarCloud for automated code quality and security analysis.

## Configuration

The configuration is defined in `sonar-project.properties`:

```properties
sonar.projectKey=sparkman_suiviseries
sonar.organization=sparkman

sonar.sources=src
sonar.tests=src
sonar.test.inclusions=**/*.spec.ts
sonar.exclusions=**/*.spec.ts,**/node_modules/**,**/dist/**

sonar.javascript.lcov.reportPaths=coverage/lcov.info
```

## Automatic Analysis

SonarCloud automatically analyzes:

- Every push to the `main` branch
- Every pull request

Analysis is performed via GitHub Actions.

## Dashboard

View the project dashboard:

- **Project**: [sparkman_suiviseries](https://sonarcloud.io/project/overview?id=sparkman_suiviseries)
- **Organization**: [sparkman](https://sonarcloud.io/organizations/sparkman/projects)

## Metrics Tracked

- **Code Coverage**: Measured via `lcov.info` generated by Vitest
- **Code Smells**: Maintainability issues
- **Bugs**: Potential bugs detected
- **Security Vulnerabilities**: Security issues identified
- **Security Hotspots**: Code requiring security review
- **Duplications**: Duplicated code blocks
- **Technical Debt**: Estimated time to fix all issues

## Quality Gate

The project must pass the SonarCloud Quality Gate to merge PRs:

- Coverage ≥ threshold (configurable)
- No new bugs
- No new vulnerabilities
- No new code smells (configurable)
- Maintainability rating ≥ A
- Security rating ≥ A

## Usage

### Local Coverage

Generate coverage report before pushing:

```bash
npm run test:coverage
```

This creates `coverage/lcov.info` which SonarCloud uses for coverage metrics.

### Viewing Results

1. Push your code to GitHub
2. Wait for GitHub Actions to complete
3. Check the SonarCloud dashboard for results
4. Review any new issues detected

## Best Practices

- Fix issues before merging PRs
- Maintain high code coverage (≥80% recommended)
- Review security hotspots carefully
- Reduce technical debt incrementally
- Follow Angular and TypeScript best practices
