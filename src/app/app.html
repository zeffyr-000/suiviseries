<div>
  <mat-sidenav-container class="app-container">
    <mat-sidenav #sidenav mode="over" [opened]="menuOpen()">
      <mat-nav-list>
        <mat-list-item routerLink="/" (click)="toggleMenu()">
          <mat-icon matListItemIcon>home</mat-icon>
          <span matListItemTitle>{{ 'navigation.home' | transloco }}</span>
        </mat-list-item>
        @if (currentUser()) {
        <mat-list-item routerLink="/mes-series" (click)="toggleMenu()">
          <mat-icon matListItemIcon>tv</mat-icon>
          <span matListItemTitle>{{ 'navigation.my_series' | transloco }}</span>
        </mat-list-item>
        }
        <mat-list-item routerLink="/search" (click)="toggleMenu()">
          <mat-icon matListItemIcon>search</mat-icon>
          <span matListItemTitle>{{ 'navigation.search' | transloco }}</span>
        </mat-list-item>
      </mat-nav-list>
    </mat-sidenav>

    <mat-sidenav-content>
      <mat-toolbar color="primary" class="app-toolbar">
        <button mat-icon-button (click)="toggleMenu()" aria-label="Menu">
          <mat-icon>menu</mat-icon>
        </button>
        <a routerLink="/" class="app-title-link" [attr.aria-label]="'app.title' | transloco">
          <mat-icon class="app-title-icon" aria-hidden="true">live_tv</mat-icon>
          <span class="app-title">{{ 'app.title' | transloco }}</span>
        </a>
        <span class="spacer"></span>

        @if (currentUser(); as user) {
        <button mat-icon-button [matMenuTriggerFor]="userMenu" class="user-menu-trigger"
          [attr.aria-label]="'app.user_menu' | transloco">
          @if (user.photo_url) {
          <img [src]="user.photo_url" [alt]="user.display_name" class="user-avatar">
          } @else {
          <mat-icon>account_circle</mat-icon>
          }
        </button>

        <mat-menu #userMenu="matMenu">
          <div class="user-info">
            <div class="user-name">{{ user.display_name }}</div>
            <div class="user-email">{{ user.email }}</div>
          </div>
          <mat-divider></mat-divider>
          <button mat-menu-item (click)="logout()">
            <mat-icon>logout</mat-icon>
            <span>{{ 'auth.logout' | transloco }}</span>
          </button>
        </mat-menu>
        } @else {
        <button mat-flat-button color="accent" (click)="login()" class="login-button">
          <mat-icon>login</mat-icon>
          {{ 'auth.sign_in' | transloco }}
        </button>
        }

      </mat-toolbar>

      <main class="app-content">
        <router-outlet></router-outlet>
      </main>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>